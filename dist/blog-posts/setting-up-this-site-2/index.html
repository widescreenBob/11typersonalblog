<!doctype html>
<html lang="en">
  <head>
    <title>Creating this site with eleventy part 2</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans+Condensed:wght@700&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/style/style.css">
    <link rel='icon' href='favico.ico' type='image/x-icon'/ >
  </head>
  <body>
    <a class="header-skip-link visually-hidden" href="#main-content">Skip to content</a>
<header role="banner">
  <div class="header">
    <div class="header__upper">
      <h1><a href="/" aria-label="Home page">Tobias Williams</a></h1>
    </div>
    <div class="header__lower">
      <div class="header__social">
        <a href="https://twitter.com/widescreen_bob" class="header__social-item twitter">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 71">
            <path d="M23.47 60.86c22.64 0 35.03-18.76 35.03-35.03 0-.53 0-1.06-.04-1.59 2.41-1.74 4.49-3.9 6.14-6.37-2.25 1-4.63 1.65-7.07 1.94 2.57-1.54 4.49-3.96 5.41-6.81a24.943 24.943 0 01-7.82 2.99c-4.66-4.96-12.46-5.2-17.42-.53-3.2 3.01-4.55 7.49-3.56 11.76-9.9-.5-19.12-5.17-25.37-12.86-3.27 5.62-1.6 12.82 3.81 16.43-1.95-.07-3.87-.59-5.58-1.55v.16c0 5.86 4.13 10.91 9.88 12.07-1.81.49-3.71.57-5.56.21 1.61 5.01 6.23 8.45 11.5 8.55a24.644 24.644 0 01-18.22 5.1 34.962 34.962 0 0018.87 5.53" fill="#b32e22"/>
          </svg>
          <span class="visually-hidden">Read Tobias' tweets</span>
        </a>
        <a href="https://www.drupal.org/u/widescreen_bob" class="header__social-item drupal">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 71">
            <path fill="#B32E22" d="M44.18 19.46c-3.88-3.87-7.57-7.57-8.67-11.73-1.08 4.16-4.8 7.86-8.68 11.73-5.81 5.81-12.4 12.39-12.4 22.27-.25 11.64 8.98 21.28 20.62 21.53s21.28-8.98 21.53-20.62c.01-.31.01-.61 0-.92 0-9.87-6.59-16.45-12.4-22.26z"/>
          </svg>
          <span class="visually-hidden">See Tobias' Drupal Profile</span>
        </a>
        <a href="https://github.com/widescreenBob" class="header__social-item github">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 71">
            <path fill-rule="evenodd" clip-rule="evenodd" fill="#B32E22" d="M35.5 6.53c-16.4 0-29.7 13.3-29.7 29.7 0 13.12 8.51 24.25 20.31 28.18 1.49.27 2.03-.64 2.03-1.43 0-.71-.03-2.57-.04-5.05-8.26 1.79-10-3.98-10-3.98-1.35-3.43-3.3-4.34-3.3-4.34-2.7-1.85.2-1.81.2-1.81 2.98.21 4.55 3.06 4.55 3.06 2.65 4.54 6.95 3.23 8.64 2.47.27-1.92 1.04-3.23 1.89-3.97-6.59-.75-13.53-3.3-13.53-14.68 0-3.24 1.16-5.89 3.06-7.97-.31-.75-1.32-3.77.29-7.86 0 0 2.49-.8 8.17 3.04 2.37-.66 4.91-.99 7.44-1 2.52.01 5.06.34 7.44 1 5.67-3.84 8.16-3.04 8.16-3.04 1.62 4.09.6 7.11.3 7.86 1.9 2.08 3.05 4.73 3.05 7.97 0 11.41-6.94 13.92-13.56 14.66 1.07.92 2.02 2.73 2.02 5.5 0 3.97-.04 7.17-.04 8.15 0 .79.53 1.72 2.04 1.43C56.7 60.48 65.2 49.35 65.2 36.24c0-16.41-13.3-29.71-29.7-29.71z"/>
          </svg>
          <span class="visually-hidden">See Tobias' Github Profile</span>
        </a>
        <a href="https://codepen.io/widescreenBob/" class="header__social-item codepen">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 71">
            <g fill="#B32E22">
              <path d="M35.5 6.66C19.57 6.66 6.66 19.57 6.66 35.5S19.57 64.34 35.5 64.34 64.34 51.43 64.34 35.5 51.43 6.66 35.5 6.66zm0 52.94c-13.29 0-24.1-10.81-24.1-24.1s10.81-24.1 24.1-24.1c13.29 0 24.1 10.81 24.1 24.1S48.79 59.6 35.5 59.6z"/>
              <path d="M53.32 29.87c0-.02-.01-.04-.01-.07l-.03-.13c-.01-.03-.02-.05-.02-.07a.358.358 0 00-.04-.11c-.01-.03-.02-.05-.03-.08-.02-.03-.03-.07-.05-.1-.01-.02-.03-.05-.04-.07l-.06-.09c-.02-.02-.03-.04-.05-.07a.304.304 0 00-.08-.08l-.06-.06a.55.55 0 00-.09-.07.304.304 0 00-.07-.05c-.01-.01-.02-.01-.03-.02l-16.3-10.87c-.51-.34-1.19-.34-1.7 0L18.36 28.8c-.01.01-.02.01-.03.02-.02.02-.05.03-.07.05-.03.02-.06.05-.09.07l-.06.06-.08.08a.18.18 0 00-.05.07l-.06.09c-.02.02-.03.05-.04.07-.02.03-.04.07-.05.1-.01.02-.02.05-.03.08-.02.04-.03.07-.04.11-.01.02-.02.05-.02.07l-.03.13c0 .02-.01.04-.01.07-.01.07-.01.13-.01.2v10.87c0 .07.01.13.01.2 0 .02.01.04.01.07l.03.13c.01.03.02.05.02.07.01.04.02.08.04.11.01.03.02.05.03.07.02.03.03.07.05.1.01.02.03.05.04.07l.06.09c.02.02.03.05.05.07.02.03.05.06.08.08l.06.06c.03.03.06.05.09.07.02.02.05.04.07.05.01.01.02.01.03.02l16.3 10.87c.26.17.55.26.85.26.3 0 .59-.09.85-.26l16.3-10.87c.01-.01.02-.01.03-.02.02-.02.05-.03.07-.05.03-.02.06-.05.09-.07l.06-.06.08-.08a.18.18 0 00.05-.07l.06-.09c.01-.02.03-.05.04-.07.02-.03.04-.07.05-.1.01-.02.02-.05.03-.07.01-.04.03-.08.04-.11.01-.02.02-.05.02-.07l.03-.13c0-.02.01-.04.01-.07.01-.07.01-.13.01-.2V30.07c0-.07 0-.14-.01-.2zm-16.29-7.8l12.01 8-5.36 3.59-6.64-4.44v-7.15zm-3.06 0v7.15l-6.64 4.44-5.36-3.59 12-8zM20.73 32.94l3.83 2.56-3.83 2.56v-5.12zm13.24 16l-12.01-8 5.36-3.59 6.64 4.44v7.15zm1.53-9.81l-5.42-3.63 5.42-3.63 5.42 3.63-5.42 3.63zm1.53 9.81v-7.15l6.64-4.44 5.36 3.59-12 8zm13.24-10.88l-3.83-2.56 3.83-2.56v5.12z"/>
            </g>
          </svg>
          <span class="visually-hidden">See Tobias' Codepens pens</span>
        </a>
      </div>
      <div class="header__bar"><span class="header-shadow"></span></div>
    </div>
  </div>
</header>
    <section class="main" role="main" id="main-content">
      <div class="post__container">
  <h2> Creating this site with eleventy part 2 </h2>
  <div class="post__date"> Tue May 26 2020 </div>
  <div class="post__image">
    <img src='/img/11tyBlog.jpg' alt='The 11ty logo'>
  </div>
  <section class="l-two-col-70-30">
  <div class="l-two-col-left">
    <div class="post__content">
      <h3>How I complicated a simple tool.</h3>
<p>There is nothing quite like making something simple, vastly more complicated. To this end I added build tools to this site.</p>
<p>Here is the <a href="https://github.com/widescreenBob/11typersonalblog">Github</a> repo with the code.</p>
<h4>What I wanted to achieve:</h4>
<ul>
<li>Write scss and compile this to css.</li>
<li>Write modern js and run this through babel.</li>
<li>Lint my scss and js.</li>
<li>Use browsersync to refresh content and style changes</li>
</ul>
<p>I am using NPM and NVM as I am familiar with it. Most of my needs were met through gulp and node packages. Here is the breakdown of the packages by the task that I used them for.</p>
<p><strong>Compiling scss:</strong></p>
<ul>
<li>sass</li>
<li>gulp</li>
<li>gulp-sass</li>
<li>gulp-postcss</li>
<li>gulp-cssnano</li>
<li>browser-sync</li>
</ul>
<p><strong>Processing js:</strong></p>
<ul>
<li>sourcemaps</li>
<li>gulp-sourcemaps</li>
<li>gulp</li>
<li>gulp-babel</li>
<li>browser-sync</li>
<li>gulp-rename</li>
</ul>
<p><strong>Lint Scss:</strong></p>
<ul>
<li>gulp-stylelint</li>
</ul>
<p><strong>Lint JS:</strong></p>
<ul>
<li>gulp-eslint</li>
</ul>
<p>For linting, there are a couple of extra configs. There is a eslintrc.json and stylelingrc.yml that provide the rules used for linting both scss and js.</p>
<h4>Fun things that came up:</h4>
<p>I approached these in the order that I have them here, not because it made the most sense, it absolutely didn't, but more because I was just trying to see what would work as it occured to me.</p>
<p><strong>Compiling scss:</strong> Getting this working was actually pretty straight forward. I think that there is some work to be done in the gulp.js file to update it to be more gulp 4 friendly, but this went pretty smoothly.</p>
<p>The first thing I did was change the default file structure of eleventy to be something that I am more familiar with. I wanted my source files to be in the src directory and the compiled files in the dist file.</p>
<p>Eleventy comes with a unique file named eleventy.js that allows you to override some of the default settings. This is my current file:</p>
<code>
  module.exports = function (eleventyConfig) {<br/>
    &nbsp;&nbsp;eleventyConfig.addPassthroughCopy("src/img");<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;let markdownIt = require("markdown-it");<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;let options = {<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html: true,<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;breaks: true,<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;linkify: true<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;};<br/>
    &nbsp;&nbsp;eleventyConfig.setLibrary("md", markdownIt(options));<br/>
    &nbsp;&nbsp;return {<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;dir: {<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;input: 'src',<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output: 'dist'<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;},<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;markdownTemplateEngine: 'njk',<br/>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br/>
  }<br/>
</code>
<p>So this has a few things in it, first the pass through, which just tells the site I need the images in the dist folder in a comparable location. So if I add an image to src/img it will be copied to dist/img.</p>
<p>Next is a markdown extenstion I installed to make writing in makrdown a little easier, described <a href="https://www.11ty.dev/docs/languages/markdown/">here</a>.</p>
<p>Next we see the environment specifics that I want to use. I have redefined the default input and output to src and dist, to allow me to use the structure I am used to. Wooo. We are also declaring the templating language as nunchucks.</p>
<p>At this point I made a dev command to watch for changes, and I included the command from eleventy that serves the site (using their version of browsersync): <code>eleventy --serv</code></p>
<p>This at first seemed to be working great, I was able to trace my src files through to the dist files. However I was not able to get css changes to auto reload. Refreshing the page worked for the changes, but that was not ideal.</p>
<p>I searched around the web, and didn't find a specific fix for my issue. I susepect that it might be possible to hook into eleventy's browsersync but I couldn't find any specifics on how I might go about this.  I decided to look at adding browsersync myself. After installing the packages I updated my <a href="https://github.com/widescreenBob/11typersonalblog/blob/master/gulpfile.js">gulp tasks</a> with the browser-sync code.</p>
<p>In the package.json I now call evelenty --watch vs serve. This allows eleventy to do it's regular check for changes to files it cares about but does not boot up a local server. The gulp file defines the browsersync tasks to ensure any changes to our js or scss now trigger an update.</p>
<p>Magic.</p>

    </div>
  </div>
  <div class="l-two-col-right">
  <ul>
  <h3>Other Posts</h3>
      <li><a href="/blog-posts/setting-up-this-site/"><h4 class="homepage__blog-title">Creating this site with eleventy</h4></a>
      </li>
    
      <li><a href="/blog-posts/setting-up-this-site-3/"><h4 class="homepage__blog-title">Creating this site with eleventy part 3</h4></a>
      </li>
    
      <li><a href="/blog-posts/next-steps/"><h4 class="homepage__blog-title">What now, and trying not to run out of gas.</h4></a>
      </li>
    
      <li><a href="/blog-posts/updating-gulp-file/"><h4 class="homepage__blog-title">Updating my gulp tasks</h4></a>
      </li>
    
      <li><a href="/blog-posts/cypress-testing/"><h4 class="homepage__blog-title">Cypress Testing</h4></a>
      </li>
    
      <li><a href="/blog-posts/cypress-testing-part-two/"><h4 class="homepage__blog-title">Cypress Testing 2</h4></a>
      </li>
    
      <li><a href="/blog-posts/css-custom-properties/"><h4 class="homepage__blog-title">CSS Custom Properties</h4></a>
      </li>
    </ul>
  </div>
</div>


    </section>
    <footer>
      <div class="footer-text">widescreenbob.com since 2020.</div>
      <script src="./js/addAltText.js"></script>
      <script src="./js/modal.js"></script>
    </footer>
  </body>
</html>
